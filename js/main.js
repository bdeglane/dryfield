!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="E:\\dev\\mvc\\event3\\public",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),o=r(i),u=new o["default"];u.init()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),a=r(u),l=n(6),s=r(l),c=n(9),f=r(c),d=function(){function e(){i(this,e),this.timer=null,this.controllers={score:new a["default"],water:new s["default"],fields:[new f["default"](0),new f["default"](1),new f["default"](2)]}}return o(e,[{key:"init",value:function(){this.initFieldEvent(),this.irriguerEvent(),this.initWaterTankEvent(),this.recolterEvent(),this.frame()}},{key:"frame",value:function(){var e=this;this.timer=setInterval(function(){e.check();for(var t in e.controllers.fields)e.controllers.fields[t].model.grow()},1e3)}},{key:"initFieldEvent",value:function(){var e=this,t=function(t){e.controllers.fields[t].model.on("update",function(){e.controllers.fields[t].view.update()})};for(var n in this.controllers.fields)t(n)}},{key:"initWaterTankEvent",value:function(){var e=this;this.controllers.water.model.on("sec",function(){for(var t in e.controllers.fields)e.controllers.fields[t].view.disableButton("irr")}),this.controllers.water.model.on("full",function(){for(var t in e.controllers.fields)e.controllers.fields[t].view.enableButton("irr")}),this.controllers.water.view.on("buyWater",function(){e.controllers.score.model.hasScore()&&(e.controllers.score.model.removeScore(1),e.controllers.water.model.addWater(100))})}},{key:"irriguerEvent",value:function(){var e=this,t=function(t){e.controllers.fields[t].view.on("irriguer",function(){if(e.controllers.fields[t].model.water.value<100){var n=e.controllers.fields[t].model.needWater();e.controllers.fields[t].model.irriguer(e.getTankWater(n))}})};for(var n in this.controllers.fields)t(n)}},{key:"recolterEvent",value:function(){var e=this,t=function(t){e.controllers.fields[t].view.on("recolter",function(){e.controllers.fields[t].model.isMature()&&(e.controllers.fields[t].model.recolter(),e.controllers.score.model.addScore(1),e.controllers.fields[t].model.incrementValue())})};for(var n in this.controllers.fields)t(n)}},{key:"getTankWater",value:function(e){return this.controllers.water.model.getWater(e)}},{key:"check",value:function(){this.isGameOver()&&(clearInterval(this.timer),$("#gameOVer").modal({keyboard:!0,backdrop:!0}))}},{key:"isGameOver",value:function(){return!(0!==this.controllers.water.model.water||this.controllers.fields[0].model.hasWater()||this.controllers.fields[1].model.hasWater()||this.controllers.fields[2].model.hasWater())}}]),e}();t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),u=r(o),a=n(5),l=r(a),s=function c(){i(this,c),this.model=new u["default"],this.view=new l["default"](this.model)};t["default"]=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=function(e){function t(){i(this,t);var e=o(this,Object.getPrototypeOf(t).call(this));return e.score=0,e}return u(t,e),a(t,[{key:"addScore",value:function(e){this.score+=e,this.emit("update")}},{key:"removeScore",value:function(e){this.score-=e,this.emit("update")}},{key:"hasScore",value:function(){return this.score>0}}]),t}(s["default"]);t["default"]=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e),this.events=[]}return r(e,[{key:"on",value:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}},{key:"off",value:function(e,t){var n=this.events[e].indexOf(t);-1!==n&&this.events[e].splice(n,1)}},{key:"emit",value:function(e,t){if(this.events[e])for(var n in this.events[e])this.events[e][n](t)}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.score=t,this.el=document.getElementById("score"),this.update(),this.initEvent()}return r(e,[{key:"initEvent",value:function(){var e=this;this.score.on("update",function(){e.update()})}},{key:"update",value:function(){this.el.querySelector(".value").innerText=this.score.score}}]),e}();t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),u=r(o),a=n(8),l=r(a),s=function c(){i(this,c),this.model=new u["default"],this.view=new l["default"](this.model)};t["default"]=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=function(e){function t(){i(this,t);var e=o(this,Object.getPrototypeOf(t).call(this));return e.water=500,e}return u(t,e),a(t,[{key:"getWater",value:function(e){if(this.water>0){var t=this.water-e;if(0>=t){var n=this.water;return this.water=0,this.emit("update"),this.emit("sec"),n}return this.water-=e,this.emit("update"),e}return 0}},{key:"addWater",value:function(e){this.water+=e,this.emit("update"),this.emit("full")}}]),t}(s["default"]);t["default"]=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=function(e){function t(e){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this));return n.waterTank=e,n.el=document.getElementById("water-tank"),n.update(),n.initEvent(),n.buyWater(),n}return u(t,e),a(t,[{key:"initEvent",value:function(){var e=this;this.waterTank.on("update",function(){e.update()})}},{key:"buyWater",value:function(){var e=this,t=document.getElementById("buy");t.addEventListener("click",function(t){t.preventDefault(),e.emit("buyWater")},!1)}},{key:"update",value:function(){this.el.querySelector(".value").innerText=this.waterTank.water}}]),t}(s["default"]);t["default"]=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),u=r(o),a=n(11),l=r(a),s=function c(e){i(this,c),this.compteur=e,this.model=new u["default"],this.view=new l["default"](this.model,this.compteur)};t["default"]=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=function(e){function t(){i(this,t);var e=o(this,Object.getPrototypeOf(t).call(this));return e.timer=null,e.rebound=0,e.increment={water:1,maturity:1},e.water={value:50,increment:function(){return Math.ceil(-10*e.increment.water)}},e.maturity={value:0,increment:function(){return Math.ceil(10*e.increment.maturity)}},e}return u(t,e),a(t,[{key:"grow",value:function(){this.maturity.value>=100&&(this.maturity.value=100),this.water.value<=0&&(this.water.value=0),this.maturity.value>=100?(console.log("ready"),this.emit("ready"),this.startMaturityTimer()):!this.isMature()&&this.hasWater()?(this.clearMaturityTimer(),this.maturity.value+=this.maturity.increment(),this.water.value+=this.water.increment(),this.emit("notReady")):this.water.value<=0&&(this.emit("needWater"),this.startMaturityTimer()),this.emit("update")}},{key:"startMaturityTimer",value:function(){var e=this;null===this.timer&&(this.timer=setInterval(function(){e.isHarvest()},1e3))}},{key:"clearMaturityTimer",value:function(){clearInterval(this.timer),this.timer=null}},{key:"hasWater",value:function(){return this.water.value>0}},{key:"isMature",value:function(){return this.maturity.value>=100}},{key:"isHarvest",value:function(){this.rebound>=2?(clearInterval(this.timer),this.rebound=0,this.maturity.value=0,this.emit("notReady"),this.clearMaturityTimer()):this.rebound+=1}},{key:"irriguer",value:function(e){this.water.value+=e,this.emit("update")}},{key:"recolter",value:function(){this.maturity.value=0,this.emit("update")}},{key:"incrementValue",value:function(){this.increment.maturity*=.85,this.increment.water*=1.05}},{key:"needWater",value:function(){return Math.ceil(100-this.water.value)}}]),t}(s["default"]);t["default"]=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=function(e){function t(e,n){i(this,t);var r=o(this,Object.getPrototypeOf(t).call(this));return r.field=e,r.id=n,r.el=document.getElementById("field-"+r.id),r.update(),r.init(),r.bindButton(),r}return u(t,e),a(t,[{key:"init",value:function(){var e=this;this.field.on("update",function(){e.update()}),this.field.on("notReady",function(){e.disableButton("rec")}),this.field.on("ready",function(){e.enableButton("rec")}),this.field.on("needWater",function(){})}},{key:"bindButton",value:function(){this.irriguer(),this.recolter()}},{key:"disableButton",value:function(e){var t=document.getElementById(e+"-"+this.id);t.classList.add("disabled"),this.update()}},{key:"enableButton",value:function(e){var t=document.getElementById(e+"-"+this.id);t.classList.remove("disabled"),this.update()}},{key:"irriguer",value:function(){var e=this,t=document.getElementById("irr-"+this.id);t.addEventListener("click",function(t){t.preventDefault(),e.emit("irriguer")},!1)}},{key:"recolter",value:function(){var e=this,t=document.getElementById("rec-"+this.id);t.addEventListener("click",function(t){t.preventDefault(),e.field.isMature()&&(e.emit("recolter"),e.disableButton("rec"))},!1)}},{key:"update",value:function(){var e=this.el.querySelector(".progress-water-"+this.id);e.setAttribute("aria-valuenow",this.field.water.value),e.setAttribute("style","width:"+this.field.water.value+"%");var t=this.el.querySelector(".progress-maturity-"+this.id);t.setAttribute("aria-valuenow",this.field.maturity.value),t.setAttribute("style","width:"+this.field.maturity.value+"%")}}]),t}(s["default"]);t["default"]=c}]);
//# sourceMappingURL=main.js.map